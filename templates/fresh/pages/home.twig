{% extends 'app.twig' %}
{% block MAIN %}
	{#% cache 'main' ~ resource.id %#}
	{% set brand = _GET.brand %}
{% if not brand %}
{% set brand = 'hyundai' %}
{% endif %}
{% set model = _GET.model %}
{% if not model %}
{% set model = '' %}
{% endif %}
	{% set DLCatalog = runSnippet('DocLister', {
id: 'catalog',
filters: 'AND(tv:mark_id:=:' ~ brand ~ ';tv:model_id:like:'~ model ~')' ,
_filters: 'AND(tv:price:>:0;tv:region:=:' ~ plh.activeLangAlias ~ ')',
display: 4,
parents: 593,
depth: 2,
addWhereList: 'c.template=28',
orderBy: 'car-price',
order: 'RAND()',
tvSortType: 'SIGNED',
tvList:'car-price, old-car-price,,year, image, mark_id, configuration_id',
ownerTPL: '@T_FILE:partials/wrap',
tpl:'@T_FILE:partials/catalogcard_mod',
paginate:'pages',
TplNextP:'',
TplPrevP:'',
TplPage:'@CODE:<li class="page-item"><a class="page-link" href="[+link+]">[+num+]</a></li>',
TplCurrentPage:'@CODE: <li class="page-item active" aria-current="page"><span class="page-link">[+num+]</span></li>',
TplWrapPaginate:'@CODE:<ul class="pagination">[+wrap+]</ul>',

__filterPriceId: 14,
_filterList: '19:checkbox,20:checkbox,42:checkbox,43:checkbox',
tvSortType: 'UNSIGNED',
api: 0,
debug:0,
noneTPL:'@CODE: <div class="container">
	<div class="row">
		<div class="col text-center">
			<h2 class="display-4 catalog-block h2">По вашим критериям А/М не найдены, попробуйте немного изменить условия поиска</h1>
		</div>
	</div>
</div>',
})
%}
{% set models = runSnippet('DocLister', {
id: 'catalog',
filters: 'AND(tv:mark_id:=:' ~ brand ~ ')' ,
_filters: 'AND(tv:price:>:0;tv:region:=:' ~ plh.activeLangAlias ~ ')',
parents: 593,
depth: 1,
addWhereList: 'isfolder=1 AND c.template=20',
orderBy: 'car-price',
order: 'RAND()',
tvSortType: 'SIGNED',
tvList:'car-price,old-car-price,car_photos,run,engine_power,gear,year, image,mark_id,model_id',
api: 1,
debug:0,
noneTPL:'@CODE: <div class="container">
	<div class="row">
		<div class="col text-center">
			<h2 class="display-4 catalog-block h2">По вашим критериям А/М не найдены, попробуйте немного изменить условия поиска</h1>
		</div>
	</div>
</div>',
})
| json %}

	<div class="index-form-block position-relative text-light mb-sm-5 mb-3">
		<div class="bg position-absolute w-100 h-100" style="background: url('/templates/fresh/img/index-form.png') center/cover;"></div>
		<div class="container position-relative">
			<div class="content">
				<div class="block-name mb-sm-5 mb-4">
					Быстрый подбор нового автомобиля
				</div>
				<form class="flex">
					<div class="fields flex">
						<select class="px-3" id="marks">

							{% for item in marks %}
								<option>{{ item.pagetitle }}</option>
							{% endfor %}
						</select>
						<select class="px-3"  id="models">
							<option>Выбрать...</option>
							{% for item in models %}
							<option>{{ item.pagetitle }}</option>
							{% endfor %}
						</select>
						<input type="text" placeholder="Цена от" class="px-3">
						<input type="text" placeholder="Цена до" class="px-3">
					</div>
					<button id="filterbutton" >Подобрать авто</button>
				</form>
			</div>
		</div>
	</div>
	{% include('partials/brands.twig') %}


	<div class="index-services-block mb-5">
		<div class="container">
			<div class="block-name mb-4">
				Услуги
			</div>
			<div class="list">
				<div class="item">
					<div class="icon">
						<svg width="224" height="222" viewbox="0 0 224 222" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M106.718 0.588199C87.7489 1.30659 68.9961 7.02611 52.8683 17.0376C34.249 28.5043 19.1989 45.6582 10.2507 65.6121C1.59735 84.76 -1.41913 106.404 1.69406 127.187C4.34212 145.133 11.5034 162.397 22.3489 176.945C30.5003 187.923 40.7241 197.341 52.3111 204.603C74.2462 218.45 101.169 224.156 126.834 220.343C128.626 220.09 129.574 217.76 128.506 216.314C127.806 215.172 126.36 215.001 125.158 215.255C107.197 217.7 88.6009 215.411 71.7961 208.605C45.4399 198.101 23.8042 176.443 13.3271 150.074C7.23886 134.992 4.80725 118.469 6.16122 102.269C7.63952 83.8252 14.1745 65.8285 24.8312 50.71C32.9227 39.1604 43.3537 29.2641 55.3091 21.7808C68.1902 13.7173 82.8397 8.45369 97.9359 6.61166C115.878 4.35056 134.405 6.75442 151.127 13.6713C165.809 19.7039 179.091 29.1167 189.632 40.9841C198.336 50.7238 205.134 62.1398 209.688 74.3802C209.164 74.5224 208.629 74.6383 208.093 74.7543C206.895 75.0138 205.694 75.2738 204.6 75.8308C202.67 76.9728 202.352 79.9385 204.001 81.4674C206.296 83.89 208.616 86.2918 210.938 88.6943C211.71 89.4932 212.482 90.2922 213.253 91.092C214.39 92.4275 216.477 92.8281 217.978 91.8519C219.198 91.1473 219.604 89.7151 219.958 88.4487C220.436 86.7091 220.943 84.9781 221.45 83.2475L221.45 83.2463C222.116 80.9733 222.781 78.7011 223.38 76.411C223.983 74.3111 222.224 72.0131 220.06 71.9763C218.876 72.025 217.735 72.3349 216.595 72.6445C216.009 72.8036 215.423 72.9627 214.833 73.0861C206.009 48.7805 188.347 27.8319 165.855 15.0666C148.009 4.84791 127.267 -0.245323 106.718 0.588199Z"/>
							<path d="M81.3976 34.1804C79.7448 34.1697 78.0693 34.1588 76.5073 34.758C73.0718 35.9323 70.4698 39.1604 70.0599 42.7662C69.7237 45.3221 70.4836 47.9654 72.0586 49.9962C74.1665 52.715 76.2854 55.4246 78.4043 58.134L78.4056 58.1357C81.0129 61.4697 83.62 64.8035 86.2061 68.1541C96.2333 68.1792 106.26 68.1756 116.287 68.1719H116.295C122.783 68.1695 129.272 68.1671 135.759 68.1725L137.278 66.2314C141.493 60.8456 145.709 55.4587 149.902 50.0607C152.09 47.3068 152.647 43.3741 151.238 40.1459C149.778 36.6046 146.084 34.1271 142.244 34.1961C131.15 34.1834 120.057 34.1848 108.965 34.1862C100.091 34.1873 91.2171 34.1885 82.3423 34.1823C82.0295 34.1846 81.7149 34.1825 81.3995 34.1804H81.3976Z"/>
							<path d="M80.6614 73.9335C81.6181 73.6636 82.6179 73.6776 83.6119 73.6915H83.6124C83.9579 73.6963 84.3029 73.7012 84.645 73.694C95.6063 73.7023 106.566 73.7006 117.526 73.699H117.548C124.862 73.6979 132.175 73.6968 139.49 73.6986C140.931 73.6111 142.469 74.1637 143.243 75.4439C144.684 77.9583 143.791 82.4115 140.36 82.5358C128.625 82.5861 116.89 82.5787 105.155 82.5713C97.5616 82.5666 89.9681 82.5618 82.3745 82.5726C80.7304 82.7108 79.0265 81.8036 78.4416 80.2194C77.7232 77.986 78.0962 74.7762 80.6614 73.9335Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M85.3917 88.1036C83.3582 88.122 81.3168 88.1406 79.3396 87.606C68.9822 93.0584 60.0111 101.43 54.6689 111.916C49.7873 121.32 48.0879 132.363 50.1143 142.78C52.1222 153.5 57.9663 163.3 65.9197 170.682C76.6086 180.666 90.8851 186.463 105.406 187.587C120.534 188.803 136.155 185.091 148.755 176.526C158.731 169.807 166.771 159.947 170.447 148.416C173.924 137.746 173.371 125.861 169.005 115.527C163.976 103.411 154.199 93.5926 142.621 87.5968C140.692 88.1449 138.692 88.1226 136.701 88.1004C136.149 88.0943 135.598 88.0882 135.05 88.0942C135.51 88.5752 135.986 89.041 136.462 89.5069C137.326 90.3523 138.189 91.1976 138.955 92.1328C141.24 94.9926 141.709 99.151 140.125 102.453C138.702 105.584 135.543 107.827 132.117 108.149C129.151 108.476 126.102 107.353 124.011 105.234C121.838 103.072 119.672 100.903 117.507 98.7346C115.341 96.5655 113.175 94.3963 111.001 92.2341C106.635 96.609 102.269 100.979 97.8852 105.336C93.9661 109.416 86.6621 109.024 83.2035 104.548C80.8686 101.753 80.2837 97.6359 81.762 94.3064C82.533 92.4347 83.9783 91.0379 85.4142 89.6501C85.9426 89.1395 86.4696 88.6301 86.9614 88.0988C86.44 88.0941 85.9169 88.0988 85.3933 88.1036H85.3917ZM99.4556 109.245C101.818 107.205 104.918 106.28 107.985 106.022C108.109 104.088 109.799 102.273 111.844 102.692C113.668 102.932 114.635 104.788 114.602 106.482C117.329 107.27 120.198 108.186 122.266 110.231C124.154 112.234 123.61 115.821 121.23 117.203C119.641 118.23 117.485 118.059 115.975 116.959C113.718 115.43 110.891 114.44 108.164 115.131C106.087 115.656 104.075 117.442 104.259 119.75C104.512 121.905 106.4 123.342 108.173 124.313C109.697 125.097 111.287 125.784 112.879 126.472C116.527 128.048 120.187 129.63 123.095 132.391C129.293 138.396 128.897 149.558 122.45 155.227C120.664 156.885 118.32 157.63 116.048 158.352C115.877 158.407 115.707 158.461 115.537 158.515C114.46 158.838 114.488 159.97 114.512 160.957C114.518 161.211 114.524 161.456 114.51 161.674C114.492 162.081 114.507 162.509 114.521 162.944C114.57 164.406 114.621 165.942 113.46 166.975C111.904 168.508 108.975 167.785 108.302 165.708C108.041 164.638 108.069 163.54 108.097 162.441C108.119 161.564 108.142 160.685 108.017 159.818C107.848 158.956 106.971 158.767 106.214 158.604C106.086 158.576 105.961 158.549 105.843 158.52C103.025 158.027 100.409 156.765 98.0832 155.135L97.9413 155.037C96.493 154.036 94.8772 152.919 94.574 151.055C93.9983 148.564 95.8865 145.87 98.4194 145.552C99.8379 145.289 101.247 145.856 102.334 146.745C105.005 148.835 108.298 150.567 111.793 150.221C115.27 149.89 118.457 146.827 118.296 143.217C118.365 140.56 116.555 138.28 114.312 137.06C112.634 136.116 110.894 135.277 109.154 134.438C106.082 132.957 103.01 131.476 100.275 129.416C97.1576 127.012 94.947 123.286 94.8595 119.294C94.6338 115.448 96.4483 111.622 99.4556 109.245Z"/>
							<path d="M94.8181 88.0849C97.089 88.1 99.3612 88.0986 101.633 88.0973H101.637C103.529 88.0961 105.421 88.095 107.312 88.1033C102.946 92.4828 98.576 96.853 94.1963 101.219C92.6536 102.927 89.7983 103.153 88.0667 101.61C86.1416 100.086 85.9574 96.9175 87.7167 95.1952C89.4106 93.4613 91.131 91.7516 92.8519 90.0416C93.5076 89.3899 94.1636 88.738 94.8181 88.0849Z"/>
							<path d="M118.877 88.0972C117.481 88.0987 116.085 88.1003 114.69 88.0987C116.54 89.9395 118.384 91.7883 120.229 93.6374C122.791 96.2061 125.354 98.7755 127.935 101.325C129.671 103.194 132.982 103.028 134.525 100.998C135.939 99.3121 135.787 96.6089 134.198 95.0893C132.971 93.8223 131.719 92.5793 130.468 91.3366C129.391 90.2667 128.314 89.197 127.253 88.1126C124.462 88.0911 121.669 88.0941 118.877 88.0972Z"/>
						</svg>
					</div>
					<div class="text py-3 px-2 text-center">
						<span class="d-block mb-1">Оценка и выкуп</span>
						Оцените и выгодно продайте свой автомобиль через аукцион
					</div>
				</div>
				<div class="item">
					<div class="icon">
						<svg width="152" height="152" viewbox="0 0 152 152" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" clip-rule="evenodd" d="M62.2166 0.124561C59.4661 -0.406346 56.4891 0.79443 54.8431 3.06771C53.1404 5.31961 52.8643 8.5478 54.1741 11.0527C54.7055 12.1555 55.5768 13.0151 56.4376 13.8643C56.5975 14.022 56.757 14.1794 56.9139 14.3379C58.0029 15.4368 59.0935 16.5336 60.1838 17.6301C61.897 19.3529 63.6094 21.0751 65.3139 22.8039C64.865 22.8043 64.4156 22.8034 63.9661 22.8024C60.6516 22.7954 57.3258 22.7884 54.0466 23.3312C42.6944 25.0237 32.1208 31.3055 25.1155 40.445C19.0942 48.1948 15.6924 57.9577 15.6004 67.7991C15.5823 73.3099 15.5855 78.8207 15.5887 84.3316C15.5917 89.6028 15.5947 94.874 15.5792 100.145C10.5986 101.905 6.29416 105.486 3.62512 110.065C0.849881 114.768 -0.127115 120.501 0.8959 125.871C1.90121 131.362 5.03044 136.414 9.45524 139.771C13.8588 143.166 19.5403 144.823 25.0659 144.324C29.873 143.936 34.5244 141.926 38.128 138.705C42.1174 135.16 44.8183 130.168 45.5439 124.856C46.3333 119.415 45.0802 113.699 42.0607 109.11C39.3775 104.97 35.3173 101.777 30.6943 100.124C30.6938 98.6036 30.6932 97.0833 30.6926 95.563C30.6892 86.4322 30.6857 77.2992 30.6978 68.1661C30.7155 60.5838 33.7173 53.0691 38.9067 47.5748C43.6041 42.5258 50.0537 39.1765 56.8679 38.2821C58.9888 37.9826 61.1281 37.9958 63.264 38.0089C63.9479 38.0132 64.6314 38.0174 65.3139 38.0113C63.6062 39.7397 61.8936 41.4621 60.1807 43.1849C58.6236 44.7509 57.0662 46.3172 55.5121 47.8883C53.5369 49.8766 52.8183 53.0086 53.7528 55.6595C54.5776 58.1608 56.7829 60.1348 59.3493 60.6443C61.8555 61.2073 64.5883 60.3272 66.3547 58.4673C68.4144 56.394 70.475 54.3214 72.5355 52.2489C78.0319 46.7206 83.5283 41.1924 89.0097 35.649C91.7743 32.8769 91.7743 27.9419 89.0132 25.1698C84.4467 20.5471 79.8643 15.9377 75.2822 11.3286C72.3662 8.39546 69.4503 5.4624 66.5387 2.52611C65.3883 1.30396 63.8803 0.402485 62.2166 0.124561ZM15.6039 121.246C15.6995 118.125 17.9438 115.246 20.9066 114.359C22.9031 113.856 25.1615 113.952 26.9491 115.064C29.2288 116.382 30.712 118.966 30.6837 121.617C30.7155 124.275 29.2182 126.872 26.9279 128.191C24.6199 129.577 21.5615 129.555 19.2677 128.144C16.9102 126.751 15.427 123.997 15.6039 121.246Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M129.82 7.64278C124.638 7.40049 119.403 9.04309 115.268 12.1893C111.176 15.2679 108.167 19.7824 106.925 24.7708C105.466 30.4682 106.309 36.7286 109.261 41.8096C111.92 46.4667 116.27 50.1046 121.304 51.8826C121.316 60.918 121.312 69.9508 121.309 78.9855C121.308 80.4897 121.308 81.994 121.307 83.4983C121.339 89.9226 119.3 96.3398 115.512 101.513C110.989 107.806 103.987 112.246 96.3725 113.553C93.7847 114.05 91.1503 114.036 88.526 114.023C87.9124 114.02 87.2993 114.017 86.6875 114.02C89.6645 111.02 92.6451 108.016 95.6292 105.02C96.5991 104.079 97.5477 103.063 98.0539 101.784C99.2858 98.9658 98.5637 95.4383 96.3265 93.3361C94.1601 91.1875 90.6557 90.5996 87.9158 91.9358C86.6936 92.4735 85.7594 93.4307 84.8361 94.3767C84.6336 94.5842 84.4317 94.7911 84.2273 94.9929C82.5013 96.7303 80.7756 98.4678 79.0498 100.205C73.8773 105.413 68.7048 110.621 63.5263 115.823C62.5104 116.796 61.6608 117.972 61.2537 119.333C60.3759 122.009 61.1688 125.116 63.1794 127.068C64.2314 128.127 65.2834 129.185 66.3354 130.243C72.6567 136.603 78.9769 142.961 85.2893 149.327C87.9689 152.595 93.3353 152.954 96.3159 149.919C98.415 147.948 99.2044 144.72 98.2522 141.994C97.8309 140.64 96.946 139.5 95.9407 138.534C93.7336 136.32 91.5319 134.103 89.3305 131.885C88.4496 130.998 87.5687 130.111 86.6875 129.224L86.7361 129.224C90.9857 129.253 95.2699 129.281 99.4593 128.44C105.781 127.257 111.842 124.685 117.105 120.961C128.684 112.88 136.1 99.119 136.383 84.9235C136.425 79.0452 136.419 73.167 136.413 67.2887C136.408 62.1605 136.403 57.0322 136.429 51.904C140.507 50.4289 144.164 47.7779 146.801 44.3074C150.21 39.8856 151.888 34.1667 151.424 28.5904C150.985 22.6186 148.061 16.8927 143.516 13.0338C139.718 9.75928 134.815 7.83519 129.82 7.64278ZM121.318 30.4148C121.247 27.1189 123.597 23.9869 126.748 23.1068C128.9 22.4761 131.328 22.8574 133.162 24.1615C135.265 25.6117 136.546 28.1878 136.398 30.7568C136.305 33.6251 134.422 36.3224 131.789 37.4092C130.497 38.0113 129.035 37.9935 127.651 37.8866C124.093 37.4199 121.24 34.0171 121.318 30.4148Z"/>
						</svg>
					</div>
					<div class="text py-3 px-2 text-center">
						<span class="d-block mb-1">Обмен Trade-in</span>
						Обменяйте свой автомобиль на наш с максимальной выгодой
					</div>
				</div>
				 {#<div class="item">
					<div class="icon">
						<svg width="224" height="106" viewbox="0 0 224 106" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" clip-rule="evenodd" d="M52.7773 5.78228C52.5343 2.81402 55.2528 0.233201 58.1879 0.522147C63.4101 0.52121 68.6322 0.520139 73.8544 0.519067C105.213 0.512635 136.572 0.506203 167.93 0.528721C170.53 0.318578 173.124 2.40687 173.183 5.07305C173.302 7.7574 173.28 10.4441 173.258 13.1318C173.244 14.9086 173.229 16.6858 173.255 18.4631C177.888 18.4691 182.521 18.4668 187.153 18.4645H187.156C192.563 18.4617 197.969 18.459 203.375 18.4696C205.24 18.3449 206.993 19.3036 208.004 20.86C210.358 24.1928 212.692 27.5403 215.027 30.8878C217.361 34.2353 219.695 37.5828 222.049 40.9155C222.962 42.1369 223.599 43.5685 223.487 45.1249C223.485 49.9121 223.486 54.6994 223.487 59.4863V59.4869C223.489 67.8656 223.491 76.2435 223.474 84.6185C223.665 87.1665 221.701 89.7276 219.088 89.8655C216.977 90.0141 214.862 89.9881 212.747 89.9621H212.747C211.309 89.9445 209.872 89.9268 208.437 89.964C207.111 94.0158 204.839 97.8116 201.503 100.524C195.325 105.863 185.935 107.051 178.627 103.38C173.124 100.786 169.02 95.7364 167.227 89.964C149.078 89.9509 130.923 89.9575 112.773 89.964C111.342 94.3311 108.774 98.3894 105.051 101.154C98.8266 105.994 89.8176 106.913 82.7917 103.295C77.368 100.694 73.3297 95.6773 71.5568 89.9706C69.5353 89.9366 67.5125 89.9491 65.4902 89.9616H65.4895C62.8283 89.978 60.1678 89.9945 57.5116 89.9049C54.7537 89.9246 52.5409 87.2781 52.7707 84.5857C52.7576 58.3179 52.751 32.0435 52.7773 5.78228ZM62.6136 10.4514V80.1924C63.32 80.1924 64.0265 80.1928 64.733 80.1932C66.85 80.1945 68.967 80.1957 71.0841 80.1859C72.0953 75.6021 74.3869 71.2614 77.959 68.1683C84.3348 62.3566 94.3287 61.1023 101.946 65.1541C107.776 68.0895 111.887 73.8487 113.233 80.1924C124.383 80.1968 135.532 80.1953 146.682 80.1939C152.256 80.1931 157.831 80.1924 163.406 80.1924V10.4514H62.6136ZM173.253 45.1076C173.258 52.925 173.262 60.7436 173.236 68.5623C179.447 62.744 189.146 61.0366 196.861 64.7535C203.106 67.5642 207.571 73.5467 208.976 80.199C210.171 80.1891 211.367 80.1904 212.565 80.1916H212.568C212.968 80.192 213.368 80.1924 213.769 80.1924V55.8093H213.71C205.003 55.8093 196.296 55.8093 187.589 55.8159C185.948 55.8421 184.182 55.5335 183.065 54.2201C181.719 52.931 181.712 50.9841 181.707 49.2543L181.706 49.1307C181.732 44.5122 181.729 39.8966 181.727 35.282V35.2814C181.725 32.9741 181.724 30.6666 181.726 28.3595H173.255C173.247 33.9406 173.25 39.5229 173.253 45.1059V45.1076ZM191.641 28.3595V45.9589C193.48 45.9589 195.319 45.9593 197.157 45.9597C202.673 45.9609 208.188 45.9622 213.704 45.9523C211.914 43.4269 210.131 40.8953 208.348 38.3634L208.346 38.3608L208.343 38.3566L208.343 38.356C205.992 35.0177 203.64 31.6789 201.274 28.3529C198.866 28.3627 196.458 28.3615 194.05 28.3603C193.247 28.3599 192.444 28.3595 191.641 28.3595ZM88.6291 73.1067C84.0393 74.5317 80.6248 79.0629 80.6183 83.8896C80.3097 90.207 86.0617 95.9662 92.385 95.6444C99.0104 95.7298 104.677 89.176 103.613 82.6222C102.93 75.7072 95.1954 70.7623 88.6291 73.1067ZM184.53 73.0541C180.721 74.1902 177.642 77.4212 176.689 81.2825C174.871 87.6984 179.736 94.8433 186.342 95.5591C193.328 96.7346 200.19 90.2727 199.409 83.2329C199.1 76.1209 191.286 70.7426 184.53 73.0541Z"/>
							<path d="M3.95703 0.824259C4.74498 0.666652 5.54606 0.587849 6.34715 0.587849L9.62844 0.591922C19.4675 0.604334 29.3066 0.616745 39.1457 0.581285C39.25 0.583573 39.3551 0.585478 39.4608 0.587394C40.8721 0.612974 42.3883 0.640455 43.5123 1.60573C45.7842 3.21463 46.1256 6.81332 44.1689 8.80968C42.9476 10.2741 40.958 10.4908 39.172 10.4645C32.9173 10.4495 26.6626 10.4517 20.408 10.4538H20.4062C15.7155 10.4554 11.0247 10.457 6.33401 10.4514C4.23281 10.5893 1.98714 9.70278 1.0416 7.71956C-0.383282 5.15188 1.14666 1.60573 3.95703 0.824259Z"/>
							<path d="M27.3968 18.505C22.426 18.4737 17.4572 18.4424 12.4997 18.6469C10.0374 19.0606 8.22509 21.6415 8.62563 24.0975C8.92111 26.4813 11.1471 28.4054 13.5503 28.3266C17.8908 28.3814 22.2313 28.3719 26.5717 28.3624C30.5506 28.3536 34.5299 28.3449 38.5088 28.3857C38.6212 28.3845 38.7346 28.3837 38.849 28.3829C40.6448 28.3698 42.65 28.3552 43.9588 26.9476C46.06 25.0431 45.9089 21.3591 43.6698 19.6254C42.3477 18.4766 40.583 18.4859 38.9106 18.4948C38.5563 18.4967 38.2062 18.4985 37.8652 18.4893C34.3769 18.5489 30.8863 18.5269 27.3968 18.505Z"/>
							<path d="M24.6764 36.4145C24.9182 36.4103 25.1586 36.4061 25.3959 36.3974C27.9396 36.4252 30.4852 36.4181 33.0306 36.4111C35.3081 36.4048 37.5855 36.3985 39.8614 36.4171C41.4767 36.3974 43.1971 36.8177 44.2608 38.1311C46.1848 40.2063 45.7054 43.8641 43.335 45.3941C42.1805 46.2601 40.7278 46.2679 39.3367 46.2753C39.0506 46.2768 38.7669 46.2783 38.4891 46.2873C36.0836 46.2464 33.6767 46.2567 31.2697 46.267C28.6502 46.2782 26.0307 46.2895 23.4129 46.2347C20.9965 46.2938 18.81 44.2712 18.5933 41.8874C18.3372 39.9567 19.4272 38.0195 21.0884 37.0673C22.1804 36.4581 23.4467 36.436 24.6764 36.4145Z"/>
							<path d="M42.2384 54.6667C39.1457 54.1873 35.8757 54.1085 32.8092 54.7323C28.725 56.1508 28.8235 62.6061 32.9537 63.9064C35.9939 64.4186 39.2048 64.4252 42.245 63.8933C46.4342 62.5799 46.4474 55.9538 42.2384 54.6667Z"/>
						</svg>
					</div>
					<div class="text py-3 px-2 text-center">
						<span class="d-block mb-1">Покупка онлайн с доставкой</span>
						Купить автомобиль можно не выходя из дома
					</div>
				</div>#}
			</div>
		</div>
	</div>
	<div class="index-catalog-block mb-5">
		<div class="container">
			<div class="block-name mb-4">
				Рекомендуемые модели
			</div>
			<div class="list">
				{{DLCatalog|raw}}
			</div>
		</div>
	</div>

{% include "/partials/contacts.twig" %}
{% include "/partials/advantages.twig" %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const marksSelect = document.querySelector('#marks');
    const modelsSelect = document.querySelector('#models');
    const filterButton = document.querySelector('#filterbutton');

    const updateFilterUrl = () => {
      const brand = marksSelect.value;
      const model = modelsSelect.value;

      let url = '/katalog-novyh-avtomobilej/?';
      if (brand && brand !== 'Выбрать...') {
        url += `brand=${brand}&`;
      }

      if (model && model !== 'Выбрать...') {
        url += `model=${model}&`;
      }

      filterButton.disabled = false;
	filterButton.addEventListener('click', function(event) {
    event.preventDefault();
    window.location.href = url.slice(0, -1);
});
    };

    const updateModels = () => {
      const brand = marksSelect.value;

      if (brand && brand !== 'Выбрать...') {
        const url = `/katalog-novyh-avtomobilej/?brand=${brand}`;
        $.ajax({
          url: url,
          method: 'GET',
          dataType: 'html'
        })
        .done(function(data) {
          const modelsHtml = $(data).find('#models').html();
          $('#models').html(modelsHtml);
        })
        .fail(function(jqXHR, textStatus, errorThrown) {
          console.error(errorThrown);
        });
      }
    };

    marksSelect.addEventListener('change', function() {
      updateModels();
      updateFilterUrl();
    });
    modelsSelect.addEventListener('change', updateFilterUrl);

    filterButton.disabled = true;
  });
</script>{% endblock %}

